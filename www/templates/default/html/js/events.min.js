require(["jquery","wdn","modernizr"],function(t,e,n){"use strict";var a=t("<progress>"),r="(min-width: 768px)";t(function(){function i(t,e){window.history.pushState&&window.location.href!==t&&window.history.pushState({route:e},"",t)}function o(){m=new Date(x.data("datetime"));var e=new Date,n=m.getMonth(),a=m.getFullYear(),r=t("td",x);r.removeClass("today active"),a===e.getFullYear()&&n===e.getMonth()&&r.not(".prev,.next").each(function(){var n=t.trim(t(this).text());return n==e.getDate()?(t(this).addClass("today"),!1):void 0}),a==w.getFullYear()&&n==w.getMonth()&&r.not(".prev,.next").each(function(){var e=t.trim(t(this).text());return e==w.getDate()?(t(this).addClass("active"),!1):void 0})}function c(t){u(),a.hide(),p=setTimeout(function(){a.prependTo(t),a.fadeIn(200)},1e3)}function u(){clearTimeout(p)}function h(){var e=t("h1").data("datetime");w=e?new Date(e):new Date}function l(e){var n,a=t("aside .calendar");n=e instanceof Date?D+e.getFullYear()+"/"+(e.getMonth()+1)+"/":e,c(a),t.get(n+"?monthwidget&format=hcalendar",function(e){u(),a.html(e),x=t(".wp-calendar"),o()})}function s(e){var n,a=t("#updatecontent");n=e instanceof Date?D+e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+"/":e,i(n,"day");var r="format=hcalendar";"?"===n.charAt(n.length-1)?n+=r:n=n.indexOf("?")>0?n+"&"+r:n+"?"+r,c(a),t.get(n,function(t){u(),a.html(t),h(),m.getFullYear()!==w.getFullYear()||m.getMonth()!==w.getMonth()?l(w):o()})}function d(e){var n=t("#updatecontent");i(e,"event"),c(n),t.get(e+"?format=hcalendar",function(t){u(),n.html(t)})}function f(e){var n=t("#updatecontent");i(e,"search"),c(n),t.get(e+(-1==e.indexOf("?")?"?":"&")+"format=hcalendar",function(t){u(),n.html(t)})}function v(t,e){var n=new Date(t);return n.setMonth(n.getMonth()+e),n.getDate()<t.getDate()&&n.setDate(0),n}var g,m,w,p,D=t("link[rel=home]"),y=t("#script_main"),x=t(".wp-calendar"),M="day";D=D.length?D[0].href:"/",y=y.length?e.toAbs("./",y[0].src):"/templates/default/html/js/",g=t("aside .calendar"),g.length&&(h(),o(),g.on("click","td a",function(t){t.preventDefault(),s(this.href)}),g.on("click",".next a, .prev a",function(t){t.preventDefault(),l(this.href)})),t(".view-unl_ucbcn_frontend_eventinstance").length?M="event":t(".view-unl_ucbcn_frontend_search").length&&(M="search"),t(document).on("keyup",function(e){if(!t(e.target).is("input, select, textarea, button")){var n,a=t(".day-nav");if(a.length)switch(e.which){case 39:n=e.altKey?v(w,1):t(".next",a).attr("href"),s(n);break;case 37:n=e.altKey?v(w,-1):t(".prev",a).attr("href"),s(n)}}}),t("#updatecontent").on("click",".vevent a.summary",function(t){t.preventDefault(),d(this.href)}),t(window).on("popstate",function(t){var e=t.originalEvent.state&&t.originalEvent.state.route||M,n=window.location.href;switch(e){case"event":d(n);break;case"day":s(n);break;case"search":f(n)}}),t(window).on("resize",function(){n.mediaqueries&&!n.mq(r)})})});
//# sourceMappingURL=events.js.map