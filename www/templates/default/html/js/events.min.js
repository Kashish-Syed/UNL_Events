require(["jquery","wdn","modernizr"],function(t,e,n){"use strict";var a=t("<progress>"),i="(min-width: 768px)";t(function(){function r(t,e){window.history.pushState&&window.location.href!==t&&window.history.pushState({route:e},"",t)}function c(){w=new Date(q.data("datetime"));var e=new Date,n=w.getMonth(),a=w.getFullYear(),i=t("td",q);i.removeClass("today active"),a===e.getFullYear()&&n===e.getMonth()&&i.not(".prev,.next").each(function(){var n=t.trim(t(this).text());return n==e.getDate()?(t(this).addClass("today"),!1):void 0}),a==y.getFullYear()&&n==y.getMonth()&&i.not(".prev,.next").each(function(){var e=t.trim(t(this).text());return e==y.getDate()?(t(this).addClass("active"),!1):void 0})}function o(t){u(),a.hide(),k=setTimeout(function(){a.prependTo(t),a.fadeIn(200)},1e3)}function u(){clearTimeout(k)}function s(){var e=t("h1").data("datetime");y=e?new Date(e):new Date}function h(e){var n,a=t("aside .calendar");n=e instanceof Date?D+e.getFullYear()+"/"+(e.getMonth()+1)+"/":e,o(a),t.get(n+"?monthwidget&format=hcalendar",function(e){u(),a.html(e),q=t(".wp-calendar"),t(document.body).trigger("sticky_kit:recalc"),c()})}function d(e){var n,a=t("#updatecontent");n=e instanceof Date?D+e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+"/":e,r(n,"day");var i="format=hcalendar";"?"===n.charAt(n.length-1)?n+=i:n=n.indexOf("?")>0?n+"&"+i:n+"?"+i,o(a),t.get(n,function(e){u(),a.html(e),s(),g(),t(document.body).trigger("sticky_kit:recalc"),w.getFullYear()!==y.getFullYear()||w.getMonth()!==y.getMonth()?h(y):c()})}function l(e){var n=t("#updatecontent");r(e,"event"),o(n),t.get(e+"?format=hcalendar",function(e){u(),n.html(e),t(document.body).trigger("sticky_kit:recalc")})}function f(e){var n=t("#updatecontent");r(e,"search"),o(n),t.get(e+(-1==e.indexOf("?")?"?":"&")+"format=hcalendar",function(t){u(),n.html(t)})}function g(){if(!n.mediaqueries||n.mq(i)){var e=t("h1.day-heading, h1.upcoming-heading");e.length&&require([_+"jquery.sticky-kit.min.js"],function(){e.stick_in_parent()})}}function v(){(!n.mediaqueries||n.mq(i))&&require([_+"jquery.sticky-kit.min.js"],function(){p.closest("aside").stick_in_parent()})}function m(t,e){var n=new Date(t);return n.setMonth(n.getMonth()+e),n.getDate()<t.getDate()&&n.setDate(0),n}var p,w,y,k,D=t("link[rel=home]"),_=t("#script_main"),q=t(".wp-calendar"),b="day";D=D.length?D[0].href:"/",_=_.length?e.toAbs("./",_[0].src):"/templates/default/html/js/",p=t("aside .calendar"),p.length&&(s(),c(),v(),p.on("click","td a",function(t){t.preventDefault(),d(this.href)}),p.on("click",".next a, .prev a",function(t){t.preventDefault(),h(this.href)})),g(),t(".view-unl_ucbcn_frontend_eventinstance").length?b="event":t(".view-unl_ucbcn_frontend_search").length&&(b="search"),t(document).on("keyup",function(e){if(!t(e.target).is("input, select, textarea, button")){var n,a=t(".day-nav");if(a.length)switch(e.which){case 39:n=e.altKey?m(y,1):t(".next",a).attr("href"),d(n);break;case 37:n=e.altKey?m(y,-1):t(".prev",a).attr("href"),d(n)}}}),t("#updatecontent").on("click",".vevent a.summary",function(t){t.preventDefault(),l(this.href)}),t(window).on("popstate",function(t){var e=t.originalEvent.state&&t.originalEvent.state.route||b,n=window.location.href;switch(e){case"event":l(n);break;case"day":d(n);break;case"search":f(n)}}),t(window).on("resize",function(){n.mediaqueries&&!n.mq(i)?(q.trigger("sticky_kit:detach"),t("h1").trigger("sticky_kit:detach")):(v(),g())})})});
//# sourceMappingURL=events.js.map