var ordinal=function(e){var t=e%100;return t>=11&&t<=13?e+"th":t%10==1?e+"st":t%10==2?e+"nd":t%10==3?e+"rd":e+"th"};setRecurringOptions=function(e,t){var o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=e.val().substring(6,10),a=e.val().substring(0,2),i=parseInt(e.val().substring(3,5)),r=o[new Date(n,a-1,i).getDay()],s={1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last",1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last"},l=28;for(m=new Date(n,a-1,28);l==m.getDate();)m=new Date(n,a-1,++l);l--;for(var c=0,d=0,u=1;u<=l;u++){var m=new Date(n,a-1,u);o[m.getDay()]==r&&u<=i&&c++,o[m.getDay()]==r&&d++}t.children(".dynamicRecurring").remove(),null!=s[c]&&t.prepend("<option class='dynamicRecurring' value='"+s[c].toLowerCase()+"'>"+s[c]+" "+r+" of every month</option>"),4==c&&4==d&&t.prepend("<option class='dynamicRecurring' value='last'>Last "+r+" of every month</option>"),l==i&&t.prepend("<option class='dynamicRecurring' value='lastday'>Last day of every month</option>");var v=ordinal(i)+" of every month";t.prepend("<option class='dynamicRecurring' value='date'>"+v+"</option>")},require(["jquery","wdn","modernizr",frontend_url+"templates/default/html/js/vendor/select2/js/select2.min.js"],function(e,t,o){e(document).ready(function(){e("form").on("change blur","input",function(){e(this).removeClass("validation-failed")}),e(".use-select2").select2(),e("#bulk-action").change(function(){var t=[];if(e(".select-event").each(function(){e(this).is(":checked")&&t.push(parseInt(e(this).attr("data-id")))}),t.length>0){e("#bulk-action-ids").val(t.join(",")),e("#bulk-action-action").val(e(this).val());var o=null;if("delete"==e(this).val())o="Are you sure you want to delete these "+t.length.toString()+" events?";else if("move-to-upcoming"==e(this).val())o="Are you sure to move these "+t.length.toString()+' events to "Upcoming"?';else{if("move-to-pending"!=e(this).val())return;o="Are you sure to move these "+t.length.toString()+' events to "Pending"?'}window.confirm(o)&&e("#bulk-action-form").submit()}}),e("#check-all").click(function(t){t.preventDefault(),e(".select-event").prop("checked",!0)}),e("#uncheck-all").click(function(t){t.preventDefault(),e(".select-event").prop("checked",!1)}),e(".pending-event-tools, .upcoming-event-tools, .past-event-tools, .searched-event-tools").change(function(){"recommend"==e(this).val()?window.location=e(this).attr("data-recommend-url"):"delete"==e(this).val()?window.confirm("Are you sure you want to delete this event?")&&e("#delete-"+e(this).attr("data-id")).submit():"move-to-upcoming"==e(this).val()?(e("#move-target-"+e(this).attr("data-id")).val("upcoming"),e("#move-"+e(this).attr("data-id")).submit()):"move-to-pending"==e(this).val()?(e("#move-target-"+e(this).attr("data-id")).val("pending"),e("#move-"+e(this).attr("data-id")).submit()):"promote"==e(this).val()?(e("#promote-target-"+e(this).attr("data-id")).val("promote"),e("#promote-"+e(this).attr("data-id")).submit()):"demote"==e(this).val()?(e("#promote-target-"+e(this).attr("data-id")).val("demote"),e("#promote-"+e(this).attr("data-id")).submit()):"hide-promo"==e(this).val()&&(e("#promote-target-"+e(this).attr("data-id")).val("hide-promo"),e("#promote-"+e(this).attr("data-id")).submit())}),e("#toggle-search").click(function(t){t.preventDefault(),e("#search-form").slideToggle(400,function(){e("#search-form").is(":visible")&&e("#search-form input").focus()})}),notifier={mark_input_invalid:function(e){e.addClass("validation-failed")},failure:function(t,o){e("#notice").removeClass("affirm").addClass("negate").removeClass("alert"),e("#notice h4").text(t),e("#notice .message-content").html(o),e("#notice").fadeIn(),window.scrollTo(0,0)},info:function(t,o){e("#notice").removeClass("affirm").removeClass("negate").removeClass("alert"),e("#notice h4").text(t),e("#notice .message-content").html(o),e("#notice").fadeIn(),window.scrollTo(0,0)},success:function(t,o){e("#notice").addClass("affirm").removeClass("negate").removeClass("alert"),e("#notice h4").text(t),e("#notice .message-content").html(o),e("#notice").fadeIn(),window.scrollTo(0,0)},alert:function(t,o){e("#notice").removeClass("affirm").removeClass("negate").addClass("alert"),e("#notice h4").text(t),e("#notice .message-content").html(o),e("#notice").fadeIn(),window.scrollTo(0,0)}}})});